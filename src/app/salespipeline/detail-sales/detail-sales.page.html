<ion-header>
  <ion-toolbar  color="primary">
    <ion-buttons>
      <ion-back-button defaultHref="/salespipeline">
      </ion-back-button>
      <ion-title text-wrap><div class="ion-text-wrap">{{isLoading?'Loading...':salespipeline.client}}</div></ion-title>
      <ion-button  [routerLink]="['/','salespipeline','edit',salesId]">
        <ion-icon name="create" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="isLoading" class="ion-text-center">
<ion-spinner color="primary"></ion-spinner>
  </div>
  <ion-grid class="ion-no-padding" *ngIf="!isLoading">
    <ion-row>
      <ion-col size-sm="6" offset-sm="3">
        <ion-card>
          <ion-card-content>
            <ion-item>
              <ion-icon name="cafe-outline" size="medium" style="color: #E91E63;padding-right: 5px;"></ion-icon>
              <ion-label style="font-size: 15px;">
                 <b> Client Group : </b>{{salespipeline.group}}</ion-label>
            </ion-item>
            <ion-item class="item item-text-wrap">
              <ion-icon name="create-outline"  size="medium" style="color: #E91E63;padding-right: 5px;"></ion-icon>
              <ion-label style="font-size: 15px;"  text-wrap>
                 <b> Comment : </b>{{salespipeline.comment}}</ion-label>
                 <button [routerLink]="['/','salespipeline','comments',salespipeline.id,salespipeline.client]" style="color: #000033;border:none!important; outline:none!important;background: #ffce00;padding:5px;">More...</button>
            </ion-item>
            <ion-item >
              <ion-icon name="cash-outline"  size="medium" style="color: #E91E63;padding-right: 5px;"></ion-icon>
              <ion-label style="font-size: 15px;" >
                 <b> Amount : </b>{{salespipeline.amount}}</ion-label>
            </ion-item>


            <ion-row class="card-tab" style="background:#3F51B5" *ngFor="let location of salespipeline.locations;let i = index;">
              <ion-col size-sm="6" offset-sm="3">
                <ion-item color="success" style="padding-right: 5px;">
                  <ion-icon name="location-outline"></ion-icon>
                  <ion-label><b> City : </b> {{location.city}} </ion-label>
                 </ion-item>
                 <ion-item>
                  <button [routerLink]="['/','salespipeline','clientbilling',salespipeline.id,location.id]" style="color: #000033;border:none!important; outline:none!important;background: #ffce00;padding:5px;">Billing Rates</button>
                  <button [routerLink]="['/','salespipeline','deliverychallan',salespipeline.id,location.id]" style="color: #000033;border:none!important; outline:none!important;background: #ffce00;padding:5px;margin: 12px;">Create DC</button>
                  <button [routerLink]="['/','salespipeline','deliverychallanlist',salespipeline.clientId]" style="color: #000033;border:none!important; outline:none!important;background: #ffce00;padding:5px;">View DC</button>
                  <button [routerLink]="['/','salespipeline','invoicelist',location.id]" style="color: #000033;border:none!important; outline:none!important;background: #ffce00;padding:5px;margin: 12px;">View Invoice</button>
                </ion-item>


                 <ion-item>
                  <ion-label text-wrap><b> Billing Address : </b> {{location.address}} </ion-label>
                 </ion-item>

                 <ion-item>
                  <ion-label text-wrap><b> Installed at : </b> {{location.installAt}} </ion-label>
                 </ion-item>

                 <ion-item>
                  <ion-label text-wrap><b> Installed address : </b> {{location.installAddress}} </ion-label>
                 </ion-item>



                 <ion-item>
                  <ion-label><b> Closure Date : </b>  {{convertTimestampToDate(location.closureDate) | date:'mediumDate'}} </ion-label>
                 </ion-item>
                 <ion-item >
                  <ion-icon name="cash-outline"  size="medium" style="color: #E91E63;padding-right: 5px;"></ion-icon>
                  <ion-label style="font-size: 15px;">
                     <b> Amount : </b>{{location.amount}}</ion-label>
                </ion-item>

                <ion-row class="card-tab" style="background:#3F51B5" *ngFor="let machine of location.machines; let j = index;">
                  <ion-col size-sm="6" offset-sm="3">
                    <ion-item color="danger">
                      <ion-icon name="file-tray-stacked-outline" style="padding-right: 5px;"></ion-icon>
                      <ion-label><b> Machine : </b> {{machine.machineName}} </ion-label>
                     </ion-item>

                     <ion-item>

                      <ion-label><b> Machine Type : </b> {{machine.machineType}} </ion-label>
                     </ion-item>

                     <ion-item>

                      <ion-label><b> Machine Category : </b> {{machine.machineCategory}} </ion-label>
                     </ion-item>
                     <ion-item>

                      <ion-label><b> Count : </b> {{machine.machineCount}} </ion-label>
                     </ion-item>
                     <ion-item>

                      <ion-label><b> Rate : </b> {{machine.rate}} </ion-label>
                     </ion-item>
                     <ion-item>
                      <ion-label><b> Machine Type : </b> {{machine.machineType}} </ion-label>
                     </ion-item>
                     <ion-item>
                      <ion-label><b> Confidence Level : </b> {{machine.conflevel}}% </ion-label>
                     </ion-item>

                     <ion-item >
                      <ion-icon name="cash-outline"  size="medium" style="color: #E91E63;padding-right: 5px;"></ion-icon>
                      <ion-label style="font-size: 15px;">
                         <b> Amount : </b>{{machine.amount}}</ion-label>
                    </ion-item>

                    <ion-item color="secondary">
                      <ion-label><b> Machine Rent : </b> {{machine.mchRent}} </ion-label>
                     </ion-item>
                     <ion-item color="secondary">
                      <ion-label><b> Consumable CAP : </b> {{machine.consumableCap}} </ion-label>
                     </ion-item>
                     <ion-item color="secondary">
                      <ion-label><b> Installation Charges : </b> {{machine.mchInstCharges}} </ion-label>
                     </ion-item>
                     <ion-item color="secondary">
                      <ion-label><b> Security Deposite : </b> {{machine.mchSecDeposite}} </ion-label>
                     </ion-item>
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>
        <div></div>

        </ion-col>
    </ion-row>
  </ion-grid>


</ion-content>
